var T=Object.defineProperty,_=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var F=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&F(e,r,t[r]);if(v)for(var r of v(t))C.call(t,r)&&F(e,r,t[r]);return e},y=(e,t)=>_(e,q(t));var g=(e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&v)for(var n of v(e))t.indexOf(n)<0&&C.call(e,n)&&(r[n]=e[n]);return r};import{a as u,j as b,T as H,t as K,r as h,u as L,b as E,c as m,R as W,d as X}from"./vendor.87216626.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}};Z();const w=u(null);function O(e,t,r,n){var a;let o;if(r){let l=typeof r=="function"?r((a=e(n))==null?void 0:a.el):r,c=r&&(l==null?void 0:l.getContext("2d"));o=l&&c&&{el:l,ctx:c}}t(n,o)}const j=u(null),k=u(e=>e(j),(e,t,r)=>(n=>O(e,t,r,n))(j)),B=u(null),R=u(e=>e(B),(e,t,r)=>(n=>O(e,t,r,n))(B)),P=u(!0);function G(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>r(new Error("Failed to load file")),n.readAsDataURL(e)})}function J(e){return new Promise((t,r)=>{const n=new Image;!e||!n?r():(n.onload=()=>t(n),n.onerror=o=>r(new Error("Failed to create image")),n.src=e.toString())})}function N(e,t,r){e.fillStyle="red",e.fillRect(0,0,t.width,t.height),e.drawImage(r,0,0)}var S;(function(e){e[e.r=0]="r",e[e.g=1]="g",e[e.b=2]="b"})(S||(S={}));function M(e,t,r){const n=r.match(/([a-fA-F\d]{2})/g);if(!n||n.length!==3)throw new Error("invalid color");const o=e.getImageData(0,0,t.width,t.height),a=o.data,l=[a[length-4],a[length-3],a[length-2]];for(var c=0;c<=a.length;c+=4)a[c+1]=+l[1],a[c+2]=a[c+2]^+l[2];e.putImageData(o,0,0)}const s=b.exports.jsx,d=b.exports.jsxs,U=b.exports.Fragment;function Q(){return s("div",{className:"toaser",children:s(H,{position:"bottom-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:5e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})})}const A=(e,t)=>K(e,f({style:{backgroundColor:"tomato"}},t));function V(...e){return e.filter(Boolean).join(" ")}function Y(l){var c=l,{onDropped:e,accept:t,className:r,children:n,activeAtom:o}=c,a=g(c,["onDropped","accept","className","children","activeAtom"]);const x=h.exports.useRef(null),[$,p]=L(o);return d("label",y(f({className:V("inline-block",r),onDragOver:i=>{i.preventDefault(),i.stopPropagation(),!$&&p(!0)},onDrop:i=>{i.preventDefault(),i.stopPropagation(),p(!1),e(i.dataTransfer.files)},onDragEnter:i=>p(!0),onDragLeave:i=>p(!1)},a),{children:[s("input",{type:"file",className:"hidden",accept:t,onChange:()=>{var i,D;return((i=x.current)==null?void 0:i.files)&&e((D=x.current)==null?void 0:D.files)},ref:x}),n]}))}function ee(e){const n=e,{title:t}=n,r=g(n,["title"]);return d("svg",y(f({fill:"currentColor",viewBox:"0 0 24 24"},r),{children:[t&&s("title",{children:t}),s("path",{d:"M19 10a1 1 0 0 0-1 1v3.38l-1.48-1.48a2.79 2.79 0 0 0-3.93 0l-.7.71l-2.48-2.49a2.79 2.79 0 0 0-3.93 0L4 12.61V7a1 1 0 0 1 1-1h8a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v12.22A2.79 2.79 0 0 0 4.78 22h12.44a2.88 2.88 0 0 0 .8-.12a2.74 2.74 0 0 0 2-2.65V11A1 1 0 0 0 19 10zM5 20a1 1 0 0 1-1-1v-3.57l2.89-2.89a.78.78 0 0 1 1.1 0L15.46 20zm13-1a1 1 0 0 1-.18.54L13.3 15l.71-.7a.77.77 0 0 1 1.1 0L18 17.21zm3-15h-1V3a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0V6h1a1 1 0 0 0 0-2z"})]}))}function te(){const e=E(w),[t]=h.exports.useState(u(!1)),r=m(t);async function n(o){if(!!o.length)try{const a=await G(o[0]),l=await J(a);e(l)}catch(a){e(null),A((a==null?void 0:a.message)||"Failed to load image")}}return d("div",{className:"relative",children:[s("div",{className:`absolute left-4 top-0.5 pb-0.5 text-xs ${r?"text-slate-50 font-bold":"text-slate-100"}`,children:r?"Drop":"Load image"}),s(Y,{className:`w-32 h-32 ${r?"bg-green-700":"bg-slate-400"} border-slate-500 border rounded cursor-pointer`,onDropped:n,activeAtom:t,children:s(ee,{className:`${r?"text-green-600/30":"text-slate-300"}   pointer-events-none`})})]})}function re(r){var n=r,{className:e}=n,t=g(n,["className"]);const[o,a]=L(P);return d("label",y(f({className:V("flex items-center space-x-2 select-none",e)},t),{children:[s("input",{className:"w-4 h-4 text-slate-500 bg-purple-200 focus:ring-slate-500 focus:ring-offset-1 rounded",type:"checkbox",checked:o,onChange:l=>a(l.target.checked)}),s("div",{className:"",children:"show gray"})]}))}function z(r){var n=r,{updateAtom:e}=n,t=g(n,["updateAtom"]);const o=E(e);return s("canvas",f({ref:o},t))}function ne(){return d("div",{className:"flex justify-around space-x-2",children:[s("div",{className:"border-red-700 border",children:s(z,{className:"bg-slate-300",updateAtom:k})}),s("div",{className:"border-red-700 border",children:s(z,{className:"bg-slate-300",updateAtom:R})})]})}function oe(){const e=m(w),t=m(k),r=m(R),n=m(P);return h.exports.useEffect(()=>{if(!!t)try{e?(N(t.ctx,t.el,e),n&&M(t.ctx,t.el,"#000000")):t.ctx.clearRect(0,0,t.el.width,t.el.height)}catch(o){A("Failed to render image"),console.log("Failed to render image",o)}},[t,e,n]),h.exports.useEffect(()=>{if(!!r)try{e?(r.el.width=e.width,r.el.height=e.height,N(r.ctx,r.el,e)):r.ctx.clearRect(0,0,r.el.width,r.el.height)}catch(o){A("Failed to render image"),console.log("Failed to render image",o)}},[r,e]),h.exports.useEffect(()=>{!t||(n?n&&M(t.ctx,t.el,"#300000"):e&&N(t.ctx,t.el,e))},[t,n]),null}function ae(){const e=m(w);return d(U,{children:[s(oe,{}),d("div",{className:"flex space-x-2",children:[s(te,{}),e&&s(re,{className:"self-end pb-1"})]}),s(ne,{})]})}function se(){return d(U,{children:[s(Q,{}),s("div",{className:"h-screen bg-purple-200 p-4",children:s(ae,{})})]})}W.render(s(X.StrictMode,{children:s(se,{})}),document.getElementById("root"));
