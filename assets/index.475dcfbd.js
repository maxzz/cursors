var G=Object.defineProperty,$=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var D=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&D(e,r,t[r]);if(x)for(var r of x(t))z.call(t,r)&&D(e,r,t[r]);return e},y=(e,t)=>$(e,T(t));var h=(e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&x)for(var n of x(e))t.indexOf(n)<0&&z.call(e,n)&&(r[n]=e[n]);return r};import{a as d,r as g,u as p,j as c,b as a,T as _,t as Z,c as O,d as u,F as k,S as q,P as H,e as K,R as W,f as X}from"./vendor.9676b006.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};J();const N=d(null);function B(e,t,r,n){var o;let s;if(r){let l=typeof r=="function"?r((o=e(n))==null?void 0:o.el):r,m=r&&(l==null?void 0:l.getContext("2d"));s=l&&m&&{el:l,ctx:m}}t(n,s)}const F=d(null),P=d(e=>e(F),(e,t,r)=>(n=>B(e,t,r,n))(F)),R=d(null),V=d(e=>e(R),(e,t,r)=>(n=>B(e,t,r,n))(R)),M=d(!0),S=d(32);function U(...e){return e.filter(Boolean).join(" ")}function Q(l){var m=l,{onDropped:e,accept:t,className:r,children:n,activeAtom:s}=m,o=h(m,["onDropped","accept","className","children","activeAtom"]);const b=g.exports.useRef(null),[j,v]=p(s);return c("label",y(f({className:U("inline-block",r),onDragOver:i=>{i.preventDefault(),i.stopPropagation(),!j&&v(!0)},onDrop:i=>{i.preventDefault(),i.stopPropagation(),v(!1),e(i.dataTransfer.files)},onDragEnter:i=>v(!0),onDragLeave:i=>v(!1)},o),{children:[a("input",{type:"file",className:"hidden",accept:t,onChange:()=>{var i,C;return((i=b.current)==null?void 0:i.files)&&e((C=b.current)==null?void 0:C.files)},ref:b}),n]}))}function Y(e){const n=e,{title:t}=n,r=h(n,["title"]);return c("svg",y(f({fill:"currentColor",viewBox:"0 0 24 24"},r),{children:[t&&a("title",{children:t}),a("path",{d:"M19 10a1 1 0 0 0-1 1v3.38l-1.48-1.48a2.79 2.79 0 0 0-3.93 0l-.7.71l-2.48-2.49a2.79 2.79 0 0 0-3.93 0L4 12.61V7a1 1 0 0 1 1-1h8a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v12.22A2.79 2.79 0 0 0 4.78 22h12.44a2.88 2.88 0 0 0 .8-.12a2.74 2.74 0 0 0 2-2.65V11A1 1 0 0 0 19 10zM5 20a1 1 0 0 1-1-1v-3.57l2.89-2.89a.78.78 0 0 1 1.1 0L15.46 20zm13-1a1 1 0 0 1-.18.54L13.3 15l.71-.7a.77.77 0 0 1 1.1 0L18 17.21zm3-15h-1V3a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0V6h1a1 1 0 0 0 0-2z"})]}))}function ee(){return a("div",{className:"toaser",children:a(_,{position:"bottom-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:5e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})})}const A=(e,t)=>Z(e,f({style:{backgroundColor:"tomato"}},t));function te(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>r(new Error("Failed to load file")),n.readAsDataURL(e)})}function re(e){return new Promise((t,r)=>{const n=new Image;!e||!n?r():(n.onload=()=>t(n),n.onerror=s=>r(new Error("Failed to create image")),n.src=e.toString())})}function w(e,t){e.ctx.fillStyle="red",e.ctx.fillRect(0,0,e.el.width,e.el.height),e.ctx.drawImage(t,0,0)}function E(e,t){const r=t.match(/([a-fA-F\d]{2})/g);if(!r||r.length!==3)throw new Error("invalid color");const n=e.ctx.getImageData(0,0,e.el.width,e.el.height),s=n.data,o=[s[length-4],s[length-3],s[length-2]];for(var l=0;l<=s.length;l+=4)s[l+1]=+o[1],s[l+2]=s[l+2]^+o[2];e.ctx.putImageData(n,0,0)}function ne(){const e=O(N),[t]=g.exports.useState(d(!1)),r=u(t);async function n(s){if(!!s.length)try{const o=await te(s[0]),l=await re(o);e(l)}catch(o){e(null),A((o==null?void 0:o.message)||"Failed to load image")}}return c("div",{className:"relative",children:[a("div",{className:`absolute left-4 top-0.5 pb-0.5 text-xs ${r?"text-slate-50 font-bold":"text-slate-100"}`,children:r?"Drop":"Load image"}),a(Q,{className:`w-32 h-32 ${r?"bg-green-700":"bg-slate-400"} border-slate-500 border rounded cursor-pointer`,onDropped:n,activeAtom:t,children:a(Y,{className:`${r?"text-green-600/30":"text-slate-300"}   pointer-events-none`})})]})}function ae(){const e=u(N),t=u(P),r=u(M);return g.exports.useEffect(()=>{if(!!t)try{e?(w(t,e),r&&E(t,"#000000")):t.ctx.clearRect(0,0,t.el.width,t.el.height)}catch(n){A("Failed to render image"),console.log("Failed to render image",n)}},[t,e,r]),g.exports.useEffect(()=>{!t||(r?r&&E(t,"#300000"):e&&w(t,e))},[t,r]),null}function se(){const e=u(N),t=u(V);return g.exports.useEffect(()=>{if(!!t)try{e?(t.el.width=e.width,t.el.height=e.height,w(t,e)):t.ctx.clearRect(0,0,t.el.width,t.el.height)}catch(r){A("Failed to render image"),console.log("Failed to render image",r)}},[t,e]),null}function oe(){return c(k,{children:[a(ae,{}),a(se,{})]})}function L(r){var n=r,{updateAtom:e}=n,t=h(n,["updateAtom"]);const s=O(e);return a("canvas",f({ref:s},t))}function le(){return c("div",{className:"flex gap-4",children:[a("div",{className:"border-red-700 border",children:a(L,{className:"bg-slate-300",updateAtom:P})}),a("div",{className:"border-red-700 border",children:a(L,{className:"bg-slate-300",updateAtom:V})})]})}function ce(r){var n=r,{className:e}=n,t=h(n,["className"]);const[s,o]=p(M);return c("label",y(f({className:U("flex items-center space-x-2 select-none",e)},t),{children:[a("input",{className:"w-4 h-4 text-slate-500 bg-purple-200 focus:ring-slate-500 focus:ring-offset-1 rounded",type:"checkbox",checked:s,onChange:l=>o(l.target.checked)}),a("div",{className:"",children:"show gray"})]}))}const ie=[16,32,64,128,256];function de(){const[e,t]=p(S);function r(n){t(+n.target.value)}return a("div",{className:"self-start flex items-center space-x-2",children:ie.map((n,s)=>c("label",{className:"text-xs flex items-center space-x-1",children:[a("input",{type:"radio",value:n,checked:e===n,onChange:r}),a("div",{className:"",children:n})]},n))})}function ue(){const[e,t]=p(S);return a("div",{className:"self-start flex items-center space-x-2",children:c("label",{className:"flex items-center",children:[a("div",{className:"",children:"Size"}),a("input",{type:"range",value:e,onChange:r=>t(+r.target.value)}),a("input",{type:"text",value:e,onChange:r=>t(+r.target.value)})]})})}function fe(){return p(S),a("div",{className:"self-start flex items-center space-x-2",children:a(q,{label:"Cookies to buy",defaultValue:12})})}function me(){const e=u(N);return c("div",{className:"h-full flex flex-col",children:[a(oe,{}),c("div",{className:"flex space-x-2",children:[a(ne,{}),e&&a(ce,{className:"self-end pb-1"}),c("div",{className:"",children:[a("div",{className:"",children:"Cursor size"}),a(de,{}),a(ue,{}),a(fe,{})]})]}),a("div",{className:"flex-1 flex items-center justify-center",children:a(le,{})})]})}function he(){return a(k,{children:c(H,{theme:K,children:[a(ee,{}),a("div",{className:"h-screen bg-purple-200 p-4",children:a(me,{})})]})})}W.render(a(X.StrictMode,{children:a(he,{})}),document.getElementById("root"));
