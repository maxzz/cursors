var T=Object.defineProperty,V=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var I=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&I(e,r,t[r]);if(g)for(var r of g(t))N.call(t,r)&&I(e,r,t[r]);return e},v=(e,t)=>V(e,z(t));var y=(e,t)=>{var r={};for(var o in e)A.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&g)for(var o of g(e))t.indexOf(o)<0&&N.call(e,o)&&(r[o]=e[o]);return r};import{a as i,j as b,T as U,t as $,r as h,u as C,b as L,c as d,R as q,d as B}from"./vendor.87216626.js";const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}};G();const F=i(null),O=i(null),k=i(e=>e(O),(e,t,r)=>{t(O,r),r?t(w,r.getContext("2d")):t(w,null)}),w=i(null),E=i(!0);function H(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=()=>r(new Error("Failed to load file")),o.readAsDataURL(e)})}function K(e){return new Promise((t,r)=>{const o=new Image;!e||!o?r():(o.onload=()=>t(o),o.onerror=a=>r(new Error("Failed to create image")),o.src=e.toString())})}function j(e,t,r){e.fillStyle="red",e.fillRect(0,0,t.width,t.height),e.drawImage(r,0,0)}function W(e,t){const r=e.getImageData(0,0,t.width,t.height),o=r.data;for(var a=0;a<=o.length;a+=4){const n=(o[a]+o[a+1]+o[a+2])/3;o[a]=n,o[a+1]=n,o[a+2]=n}e.putImageData(r,0,0)}var P;(function(e){e[e.r=0]="r",e[e.g=1]="g",e[e.b=2]="b"})(P||(P={}));function X(e,t,r){const o=r.match(/(\d\d)/g);if(!o||o.length!==3)throw new Error("invalid color");const a=e.getImageData(0,0,t.width,t.height),n=a.data;for(var l=0;l<=n.length;l+=4)(n[l]+n[l+1]+n[l+2])/3,n[l+0]=0,n[l+1]=256,n[l+2]=0;e.putImageData(a,0,0)}const s=b.exports.jsx,u=b.exports.jsxs,R=b.exports.Fragment;function Z(){return s("div",{className:"toaser",children:s(U,{position:"bottom-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:5e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})})}const S=(e,t)=>$(e,m({style:{backgroundColor:"tomato"}},t));function _(...e){return e.filter(Boolean).join(" ")}function J(l){var x=l,{onDropped:e,accept:t,className:r,children:o,activeAtom:a}=x,n=y(x,["onDropped","accept","className","children","activeAtom"]);const p=h.exports.useRef(null),[M,f]=C(a);return u("label",v(m({className:_("inline-block",r),onDragOver:c=>{c.preventDefault(),c.stopPropagation(),!M&&f(!0)},onDrop:c=>{c.preventDefault(),c.stopPropagation(),f(!1),e(c.dataTransfer.files)},onDragEnter:c=>f(!0),onDragLeave:c=>f(!1)},n),{children:[s("input",{type:"file",className:"hidden",accept:t,onChange:()=>{var c,D;return((c=p.current)==null?void 0:c.files)&&e((D=p.current)==null?void 0:D.files)},ref:p}),o]}))}function Q(e){const o=e,{title:t}=o,r=y(o,["title"]);return u("svg",v(m({fill:"currentColor",viewBox:"0 0 24 24"},r),{children:[t&&s("title",{children:t}),s("path",{d:"M19 10a1 1 0 0 0-1 1v3.38l-1.48-1.48a2.79 2.79 0 0 0-3.93 0l-.7.71l-2.48-2.49a2.79 2.79 0 0 0-3.93 0L4 12.61V7a1 1 0 0 1 1-1h8a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v12.22A2.79 2.79 0 0 0 4.78 22h12.44a2.88 2.88 0 0 0 .8-.12a2.74 2.74 0 0 0 2-2.65V11A1 1 0 0 0 19 10zM5 20a1 1 0 0 1-1-1v-3.57l2.89-2.89a.78.78 0 0 1 1.1 0L15.46 20zm13-1a1 1 0 0 1-.18.54L13.3 15l.71-.7a.77.77 0 0 1 1.1 0L18 17.21zm3-15h-1V3a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0V6h1a1 1 0 0 0 0-2z"})]}))}function Y(){const e=L(F),[t]=h.exports.useState(i(!1)),r=d(t);async function o(a){if(!!a.length)try{const n=await H(a[0]),l=await K(n);e(l)}catch(n){e(null),S((n==null?void 0:n.message)||"Failed to load image")}}return u("div",{className:"relative",children:[s("div",{className:`absolute left-4 top-0.5 pb-0.5 text-xs ${r?"text-slate-50 font-bold":"text-slate-100"}`,children:r?"Drop":"Load image"}),s(J,{className:`w-32 h-32 ${r?"bg-green-700":"bg-slate-400"} border-slate-500 border rounded cursor-pointer`,onDropped:o,activeAtom:t,children:s(Q,{className:`${r?"text-green-600/30":"text-slate-300"}   pointer-events-none`})})]})}function ee(){const[e,t]=C(E);return u("label",{className:"flex items-center space-x-2 select-none",children:[s("input",{className:"w-4 h-4 text-slate-500 bg-purple-200 focus:ring-slate-500 focus:ring-offset-1 rounded",type:"checkbox",checked:e,onChange:r=>t(r.target.checked)}),s("div",{className:"",children:"show gray"})]})}function te(){const e=L(k);return s("canvas",{ref:e,className:"my-1 bg-slate-300"})}function re(){const e=d(F),t=d(k),r=d(w),o=d(E);return h.exports.useEffect(()=>{if(!(!t||!r))try{e?(t.width=e.width,t.height=e.height,j(r,t,e),o&&X(r,t,"#000000")):r.clearRect(0,0,t.width,t.height)}catch(a){S("Failed to render image"),console.log("Failed to render image",a)}},[t,r,e]),h.exports.useEffect(()=>{!t||!r||(o?W(r,t):e&&j(r,t,e))},[t,r,o]),u(R,{children:[s(Y,{}),s(te,{}),e&&s(ee,{})]})}function oe(){return u(R,{children:[s(Z,{}),s("div",{className:"h-screen bg-purple-200 p-4",children:s(re,{})})]})}q.render(s(B.StrictMode,{children:s(oe,{})}),document.getElementById("root"));
