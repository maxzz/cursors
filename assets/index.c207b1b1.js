var $=Object.defineProperty,T=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var D=(e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&D(e,r,t[r]);if(v)for(var r of v(t))F.call(t,r)&&D(e,r,t[r]);return e},x=(e,t)=>T(e,_(t));var h=(e,t)=>{var r={};for(var n in e)I.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&v)for(var n of v(e))t.indexOf(n)<0&&F.call(e,n)&&(r[n]=e[n]);return r};import{a as d,j as A,r as g,u as y,T as Z,t as q,b as O,c as u,R as H,d as K}from"./vendor.edbd3f55.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}};W();const N=d(null);function B(e,t,r,n){var o;let a;if(r){let c=typeof r=="function"?r((o=e(n))==null?void 0:o.el):r,m=r&&(c==null?void 0:c.getContext("2d"));a=c&&m&&{el:c,ctx:m}}t(n,a)}const R=d(null),k=d(e=>e(R),(e,t,r)=>(n=>B(e,t,r,n))(R)),z=d(null),j=d(e=>e(z),(e,t,r)=>(n=>B(e,t,r,n))(z)),P=d(!0),M=d(32);function U(...e){return e.filter(Boolean).join(" ")}const s=A.exports.jsx,l=A.exports.jsxs,V=A.exports.Fragment;function X(c){var m=c,{onDropped:e,accept:t,className:r,children:n,activeAtom:a}=m,o=h(m,["onDropped","accept","className","children","activeAtom"]);const b=g.exports.useRef(null),[G,p]=y(a);return l("label",x(f({className:U("inline-block",r),onDragOver:i=>{i.preventDefault(),i.stopPropagation(),!G&&p(!0)},onDrop:i=>{i.preventDefault(),i.stopPropagation(),p(!1),e(i.dataTransfer.files)},onDragEnter:i=>p(!0),onDragLeave:i=>p(!1)},o),{children:[s("input",{type:"file",className:"hidden",accept:t,onChange:()=>{var i,C;return((i=b.current)==null?void 0:i.files)&&e((C=b.current)==null?void 0:C.files)},ref:b}),n]}))}function J(e){const n=e,{title:t}=n,r=h(n,["title"]);return l("svg",x(f({fill:"currentColor",viewBox:"0 0 24 24"},r),{children:[t&&s("title",{children:t}),s("path",{d:"M19 10a1 1 0 0 0-1 1v3.38l-1.48-1.48a2.79 2.79 0 0 0-3.93 0l-.7.71l-2.48-2.49a2.79 2.79 0 0 0-3.93 0L4 12.61V7a1 1 0 0 1 1-1h8a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v12.22A2.79 2.79 0 0 0 4.78 22h12.44a2.88 2.88 0 0 0 .8-.12a2.74 2.74 0 0 0 2-2.65V11A1 1 0 0 0 19 10zM5 20a1 1 0 0 1-1-1v-3.57l2.89-2.89a.78.78 0 0 1 1.1 0L15.46 20zm13-1a1 1 0 0 1-.18.54L13.3 15l.71-.7a.77.77 0 0 1 1.1 0L18 17.21zm3-15h-1V3a1 1 0 0 0-2 0v1h-1a1 1 0 0 0 0 2h1v1a1 1 0 0 0 2 0V6h1a1 1 0 0 0 0-2z"})]}))}function Q(){return s("div",{className:"toaser",children:s(Z,{position:"bottom-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:5e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})})}const S=(e,t)=>q(e,f({style:{backgroundColor:"tomato"}},t));function Y(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>r(new Error("Failed to load file")),n.readAsDataURL(e)})}function ee(e){return new Promise((t,r)=>{const n=new Image;!e||!n?r():(n.onload=()=>t(n),n.onerror=a=>r(new Error("Failed to create image")),n.src=e.toString())})}function w(e,t){e.ctx.fillStyle="red",e.ctx.fillRect(0,0,e.el.width,e.el.height),e.ctx.drawImage(t,0,0)}function E(e,t){const r=t.match(/([a-fA-F\d]{2})/g);if(!r||r.length!==3)throw new Error("invalid color");const n=e.ctx.getImageData(0,0,e.el.width,e.el.height),a=n.data,o=[a[length-4],a[length-3],a[length-2]];for(var c=0;c<=a.length;c+=4)a[c+1]=+o[1],a[c+2]=a[c+2]^+o[2];e.ctx.putImageData(n,0,0)}function te(){const e=O(N),[t]=g.exports.useState(d(!1)),r=u(t);async function n(a){if(!!a.length)try{const o=await Y(a[0]),c=await ee(o);e(c)}catch(o){e(null),S((o==null?void 0:o.message)||"Failed to load image")}}return l("div",{className:"relative",children:[s("div",{className:`absolute left-4 top-0.5 pb-0.5 text-xs ${r?"text-slate-50 font-bold":"text-slate-100"}`,children:r?"Drop":"Load image"}),s(X,{className:`w-32 h-32 ${r?"bg-green-700":"bg-slate-400"} border-slate-500 border rounded cursor-pointer`,onDropped:n,activeAtom:t,children:s(J,{className:`${r?"text-green-600/30":"text-slate-300"}   pointer-events-none`})})]})}function re(){const e=u(N),t=u(k),r=u(P);return g.exports.useEffect(()=>{if(!!t)try{e?(w(t,e),r&&E(t,"#000000")):t.ctx.clearRect(0,0,t.el.width,t.el.height)}catch(n){S("Failed to render image"),console.log("Failed to render image",n)}},[t,e,r]),g.exports.useEffect(()=>{!t||(r?r&&E(t,"#300000"):e&&w(t,e))},[t,r]),null}function ne(){const e=u(N),t=u(j);return g.exports.useEffect(()=>{if(!!t)try{e?(t.el.width=e.width,t.el.height=e.height,w(t,e)):t.ctx.clearRect(0,0,t.el.width,t.el.height)}catch(r){S("Failed to render image"),console.log("Failed to render image",r)}},[t,e]),null}function ae(){return l(V,{children:[s(re,{}),s(ne,{})]})}function L(r){var n=r,{updateAtom:e}=n,t=h(n,["updateAtom"]);const a=O(e);return s("canvas",f({ref:a},t))}function se(){return l("div",{className:"flex gap-4",children:[s("div",{className:"border-red-700 border",children:s(L,{className:"bg-slate-300",updateAtom:k})}),s("div",{className:"border-red-700 border",children:s(L,{className:"bg-slate-300",updateAtom:j})})]})}function oe(r){var n=r,{className:e}=n,t=h(n,["className"]);const[a,o]=y(P);return l("label",x(f({className:U("flex items-center space-x-2 select-none",e)},t),{children:[s("input",{className:"w-4 h-4 text-slate-500 bg-purple-200 focus:ring-slate-500 focus:ring-offset-1 rounded",type:"checkbox",checked:a,onChange:c=>o(c.target.checked)}),s("div",{className:"",children:"show gray"})]}))}const ce=[16,32,64,128,256];function le(){const[e,t]=y(M);function r(n){t(+n.target.value)}return s("div",{className:"self-start flex items-center space-x-2",children:ce.map((n,a)=>l("label",{className:"text-xs flex items-center space-x-1",children:[s("input",{type:"radio",value:n,checked:e===n,onChange:r}),s("div",{className:"",children:n})]},n))})}function ie(){const[e,t]=y(M);return s("div",{className:"self-start flex items-center space-x-2",children:l("label",{className:"flex items-center",children:[s("div",{className:"",children:"Size"}),s("input",{type:"range",value:e,onChange:r=>t(+r.target.value)}),s("input",{type:"text",value:e,onChange:r=>t(+r.target.value)})]})})}function de(){const e=u(N);return l("div",{className:"h-full flex flex-col",children:[s(ae,{}),l("div",{className:"flex space-x-2",children:[s(te,{}),e&&s(oe,{className:"self-end pb-1"}),l("div",{className:"",children:[s("div",{className:"",children:"Cursor size"}),s(le,{}),s(ie,{})]})]}),s("div",{className:"flex-1 flex items-center justify-center",children:s(se,{})})]})}function ue(){return l(V,{children:[s(Q,{}),s("div",{className:"h-screen bg-purple-200 p-4",children:s(de,{})})]})}H.render(s(K.StrictMode,{children:s(ue,{})}),document.getElementById("root"));
